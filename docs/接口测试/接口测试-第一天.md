## 1.接口

接口分为：硬件接口（usb接口、type c接口 等）和软件接口。

接口：是指``系统``或``组件``之间的交互点，通过这些交互点可以实现数据交互。(数据交互通道)

### 概念

**接口就是：系统与系统之间，组件与组件之间，数据传递交互的通道**

![系统与组件的接口](./%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-08-19%20114528.png)

客户端（模块）：可以是一个浏览器也可以是一个APP

**接口测试：**对系统组件之间的接口进行测试。校验**传递的数据正确性**和**逻辑依赖关系的正确行**。

---

## 接口的类型

* 按协议划分：http、tcp、IP

* 按语言划分：C++、java、php...

* 按范围划分：

  * 系统之间：

    * 多个内部系统之间
    * 内部系统与外部系统之间
    * ![接口](./1665647071563.png)

  * 程序之间

    * 方法与方法之间、函数与函数之间、模块与模块之间

    * ``` python
      # 接口
      def eat(somthing)
           print('小鸟再吃{something}')
      
      # 使用接口，传递数据
      def bird()
      	eat('苹果')
          
      bird()
      ```

## 接口测试原理

``接口测试主要针对的测试目标--服务器``

* 怎么测？  
  * 模拟客户端，向服务器发出请求。
* 用什么测？
  * 工具 ：fiddler 、postman、jmter
  * 代码 ：python+UnitTest框架+Requests框架

* 测什么？
  * 测试 服务器针对客户端请求，回发的响应数据是否与预期结果一致。
    * 人眼对比
    * 断言

**断言：** 断言(assertion)是一种在程序中的一阶逻辑(如：一个结果为真或假的逻辑判断式)，目的为了表示与验证软件开发者预期的结果——当程序执行到断言的位置时，对应的断言应该为真。若断言不为真时，程序会中止执行，并给出错误信息。

​	**特点**：

* 测试可以提前介入，提前发现Bug，符合质量控制前移的理念
* 可以发现一些页面操作发现不了的问题
* 接口测试低成本高效益（底层的一个Bug能够引发上层8个左右Bug，接口测试可以实现自动化）
* 不同于传统的单元测试，接口测试是从用户的角度对系统进行全面检测



USB接口、type c接口都需要遵循协议。协议就是规则。

**什么是自动化接口测试？**

* 借助工具、代码、模拟客户端发送请求给服务器，借助**``断言``**自动判断**预期结果和实际结果**是否一致！

# 2.HTTP协议 

协议：就是规则，要求**通信的双方必须严格遵守**！

> HTTP:(Hyper Text Transfer Protocol)``超文本传输协议``，是一个``基于请求与响应模式``的，``应用层``协议，也是``互联网上应用最为``广泛的一种网络协议。
>
> HTTP端口号：80
>
> 超文本指：超出文本，如视频、图片等
>
> HTML：超文本标记语言

HTTP协议的特点：

1. 支持客户端/服务器模式
2. 简单快捷
3. 灵活
4. 无连接
5. 无状态（主要针对TCP说的） 

课外：ssh 远程连接协议 

----

# 3.URL

* 概念 :（Unifrom Resource Locator）统一资源定位符，是互联网上标准资源（**资源指：网络上所有可以看到的皆是资源**）的地址，HTTP使用URL来建立连接和传输数据。
  * 作用：在网络环境中,唯一的定位一个数据资源。

![URL语法组成](./%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-08-19%20154759.png)

* 协议：http。规定数据传输的方式

* 域名（IP）：在网络环境中找到主机——**用://与协议隔分** 

  域名可以有一级、两级。

* 端口（port）：（常省略）在网络主机上，标识一个进程（应用程序）——**用：与域名隔分**

* 资源路径：标识网络资源（文件、图片、音视频、变量...）——**用/与端口隔分**

* 查询参数：传递给**资源路径**对应的数据。——**用？与资源路径隔分。查询参数内部用&隔分多个kv对（别名键值对）**

<img src="./1665740985867.png" alt="1665740985867" style="zoom:200%;" />

---

如https://www.baidu.com/

端口号：443（由于为https协议）

资源路径：(在没有显示资源路径时，/就是资源路径)    /对应默认的的index.html

---

# 4.HTTP请求

**作用：** 

* 客户端（app、浏览器），发送请求给服务器时，使用的协议——http请求协议。
* 规定 发送给服务器的数据传输的语法格式。

![HTTP请求整体格式](./%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-08-19%20164730.png)

* 请求方法：（大小写无所谓）
  * GET：从服务器获取资源（一项或多项）——查询
  * POST：在服务器新建一个资源——添加。（常用在登录）
  * PUT：在服务器更新资源（客户端提供改变后的完整资源）——修改
  * DELETE：从服务器删除资源——删除
* 请求行：http请求第一行。格式：请求方法（空格）URL（空格）协议版本
* 请求头：语法格式：k : v
  * User-Agent：描述请求发送端的浏览器类型.
  * **Content-Type**: **描述请求体的数据类型**
    * text/html：HTML格式
    * text/plain:纯文本格式
    * image/jpeg:jpg图片格式
    * **application/josn:JSON数据格式**（常用）
    * **application/x-www-form-urlencoded: form表单数据被编码key/value格式发送到服务器（表单默认的提交的数据格式）**（常用）
    * multipart/form-data  在表单中进行文件上传时使用 
* 空行：代表HTTP请求结束。
* 请求体：请求发送时携带的数据。数据类型受Content-Type的值影响！ 
  * post和put有请求体
  * get和delete没有请求体

---

## fiddler抓包工具

#### Get请求

![1665824916017](./1665824916017.png)

### Post请求

![1665825039951](./1665825039951.png)

---

# 5.HTTP响应

**作用：**

* 服务器端，针对客户端发送的http请求，会发响应数据。——http应答！
* 规定 回发给客户端的数据组织格式。

![HTTP响应格式](./%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-08-19%20175515.png)

* 响应行（状态行）：协议版本（空格）状态码（空格）状态描述
* 状态头：语法格式：k : v
  * **Content-Type:描述响应体中数据类型。**
* 空行：代表响应头结束
* 响应体：绝大多数不为空。（请求成功：回发数据，失败：回发错误信息）
  * 数据类型受Comtent-Type值影响

P19